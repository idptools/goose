[tox]
envlist = py39,py310,py311,py312,py313
isolated_build = True
skip_missing_interpreters = False

[testenv]
# Install test dependencies
extras = test

# Install the package in development mode
usedevelop = True

# Set environment variables if needed
setenv =
    PYTHONPATH = {toxinidir}

# Dependencies that may be needed for building
deps =
    cython
    numpy
    pytest>=6.1.2

# Commands to run tests
commands =
    pytest {posargs:goose/tests}

# Pass through necessary environment variables
passenv = 
    HOME
    USER
    CI
    GITHUB_*

[testenv:py39]
basepython = python3.9

[testenv:py310]
basepython = python3.10

[testenv:py311]
basepython = python3.11

[testenv:py312]
basepython = python3.12

[testenv:py313]
basepython = python3.13

# Optional: Add a coverage environment
[testenv:coverage]
basepython = python3.11
deps =
    {[testenv]deps}
    pytest-cov
commands =
    pytest --cov=goose --cov-report=html --cov-report=term {posargs:goose/tests}

# Optional: Add a linting environment
[testenv:lint]
basepython = python3.11
skip_install = True
deps =
    flake8
    black
    isort
commands =
    flake8 goose
    black --check goose
    isort --check-only goose
